<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  
  <div id="ipod">  
    <h1>Desafio da Música Erguei As Mãos</h1>
      <audio id="audio" src="/Audio/erguei-as-maos.mp3"></audio>
      <audio id="audio2" src="/Audio/erguei-as-maos-pt-2.mp3"></audio>
      
      <button id="playWhole">
        <img src="/img/wholeImage.png" alt="Play icon"> Tocar a música inteira
      </button><br>

      <button id="playFirst">
        <img src="/img/firstPartImage.png" alt="First part icon"> Tocar somente a primeira parte
      </button><br>

      <button id="playSecond">
        <img src="/img/secondPartImage.png" alt="Second part icon"> Tocar somente a segunda parte
      </button><br>
      <progress id="progressBar" value="0" max="100"></progress>
  </div>

</body>
<script>
  // Pegar os elementos do HTML
  var audio = document.getElementById("audio");
  var audio2 = document.getElementById("audio2");
  var playWhole = document.getElementById("playWhole");
  var playFirst = document.getElementById("playFirst");
  var playSecond = document.getElementById("playSecond");
  var progressBar = document.getElementById("progressBar");
  var lyrics = document.getElementById("lyrics");

  // Definir o tempo de início e fim da segunda parte
  var secondPartStart = 0.0;
  var secondPartEnd = audio2.duration;

  // Definir a primeira parte da área
  var firstPartStart = 0.0;
  var firstPartEnd = 139.0;

  // file deepcode ignore RedeclarationVars: <please specify a reason of ignoring this>
  var lyrics = [
    "Erguei as mãos e dai glória a Deus",
    "Erguei as mãos e dai glória a Deus",
    "Erguei as mãos",
    "e cantai como os filhos do Senhor",

    "Os animaizinhos subiram de dois em dois",
    "Os animaizinhos subiram de dois em dois",
    "O Elefante",
    "E os passarinhos, como filhos do Senhor",

    "Os animaizinhos subiram de dois em dois",
    "Os animaizinhos subiram de dois em dois",
    "A minhoquinha",
    "E os penguins, como filhos do Senhor",
    
    "Os animaizinhos subiram de dois em dois",
    "Os animaizinhos subiram de dois em dois",
    "O canguru",
    "E p sapinho, como filhos do Senhor",
   
    "Deus disse a Noé: Constrói uma arca",
    "Deus disse a Noé: Constrói uma arca",
    "Que seja feita",
    "De madeira para os filhos do Senhor",

    "Por isso...",
  
    "Erguei as mãos e dai glória a Deus",
    "Erguei as mãos e dai glória a Deus",
    "Erguei as mãos", 
    "e cantai como os filhos do Senhor",

    "Erguei as mãos e dai glória a Deus",
    "Erguei as mãos e dai glória a Deus",
    "Erguei as mãos", 
    "e cantai como os filhos do Senhor",
    "(De novo)",

    "Erguei as mãos e dai glória a Deus",
    "Erguei as mãos e dai glória a Deus",
    "Erguei as mãos", 
    "e cantai como os filhos do Senhor",

  ];

  var lyricsSecondPart = [
    "E atenção agora, porque",
    "O senhor tem muitos filhos",
    "Muitos filhos ele tem",
    "Eu sou um deles, você também",
    "Você Louvemos ao Senhor",

    "Braço direito!",

    "O senhor tem muitos filhos",
    "Muitos filhos ele tem",
    "Eu sou um deles, você também",
    "Você Louvemos ao Senhor",

    "Braço direito! Braço esquerdo!",

    "O senhor tem muitos filhos",
    "Muitos filhos ele tem",
    "Eu sou um deles, você também",
    "Você Louvemos ao Senhor",

    "Braço direito! Braço esquerdo! Perna direita!",

    "O senhor tem muitos filhos",
    "Muitos filhos ele tem",
    "Eu sou um deles, você também",
    "Você Louvemos ao Senhor",

    "Braço direito! Braço esquerdo! Perna direita! Perna esquerda!",

    "O senhor tem muitos filhos",
    "Muitos filhos ele tem",
    "Eu sou um deles, você também",
    "Você Louvemos ao Senhor",

    "Braço direito! Braço esquerdo! Perna direita! Perna esquerda!",
    "Balança a cabeça!",

    "Braço direito! Braço esquerdo! Perna direita! Perna esquerda!",
    "Balança a cabeça! Dá uma voltinha!",
  
    "Braço direito! Braço esquerdo! Perna direita! Perna esquerda!",
    "Balança a cabeça! Dá uma voltinha! Dá um pulinho!",
  
    "Braço direito! Braço esquerdo! Perna direita! Perna esquerda!",
    "Balança a cabeça! Dá uma voltinha! Dá um pulinho! E abraça o irmão!",
  
    
    
    "O senhor tem muitos filhos",
    "Muitos filhos ele tem",
    "Eu sou um deles, você também",
    "Você Louvemos ao Senhor",

    "Braço direito! Braço esquerdo! Perna direita! Perna esquerda! Balança a cabeça! Balança a cabeca!",



  ];

  // Definir o tempo de espera entre cada linha em milissegundos
  var waitTime = 3300;
  var initialDelay = 22000;


  // Definir uma função que imprime a letra da música no terminal
  function printLyrics(lyrics, index, waitTime) {
    if (index >= lyrics.length) {
      return;
    }
    console.log(lyrics[index]);
    setTimeout(function() {
      printLyrics(lyrics, index + 1, waitTime);
    }, waitTime);
  }

  // Definir uma função que imprime a letra da segunda parte no terminal
  function printLyricsSecondPart(lyricsSecondPart, index, waitTime) {
    if (index >= lyricsSecondPart.length) {
      return;
    }
    console.log(lyricsSecondPart[index]);
    setTimeout(function() {
      printLyricsSecondPart(lyricsSecondPart, index + 1, waitTime);
    }, waitTime);
  }

  // Adicionar um evento de clique ao botão de tocar a música inteira
  playWhole.addEventListener("click", function() {
    audio2.pause()
    audio.currentTime = 0;
    audio.play();
    // Imprimir a letra da música no terminal
    audio.addEventListener("timeupdate", function() {
      if (audio.currentTime >= audio.duration) {
        audio.pause();
      }
    })
    setTimeout(function() {
      printLyrics(lyrics, 0, waitTime);
    }, initialDelay);
  });

  // Adicionar um evento de clique ao botão de tocar somente a primeira parte
  playFirst.addEventListener("click", function() {
    audio2.pause()
    audio.currentTime = 0;
    audio.play();
    audio.addEventListener("timeupdate", function() {
      if (audio.currentTime >= firstPartEnd && audio.currentTime < secondPartStart) {
        audio.pause();
      }
    });
    printLyrics(lyrics, 0, waitTime);
  });

    // Adicionar um evento de clique ao botão de tocar a segunda parte
  playSecond.addEventListener("click", function() {
      audio.pause();
      
      audio2.load();
      
      playSecond.click();

      audio2.currentTime = secondPartStart;
      audio2.play();
      audio2.addEventListener("timeupdate", function() {
        if (audio2.currentTime >= secondPartEnd) {
          audio2.pause();
        }
      })
      printLyricsSecondPart(lyricsSecondPart, 0, waitTime);
    });
    
    // adicionar um evento timeupdate ao audio para atualizar o progress bar
    audio.addEventListener("timeupdate", function() {
      var progress = (audio.currentTime - firstPartStart) / (firstPartEnd - firstPartStart);
      progressBar.value = progress * 100;
    })
    audio2.addEventListener("timeupdate", function() {
      var progress = (audio2.currentTime - firstPartStart) / (firstPartEnd - firstPartStart);
      progressBar.value = progress * 100;  
    })
    
  
</script>
</html>
